<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="appTitle">å·§å–°é›é»å–®ç³»çµ±</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 10px; 
            background-color: #f7f7f7;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d32f2f;
            text-align: center;
            margin-bottom: 20px;
        }
        
        /* --- æ–°å¢ç‰ˆæœ¬è³‡è¨Šæ¨£å¼ --- */
        #menuVersion {
            text-align: center;
            font-size: 0.8em;
            color: #777;
            margin-top: -10px; /* å‘ä¸Šå¾®èª¿èˆ‡æ¨™é¡Œçš„é–“è· */
            margin-bottom: 20px;
        }
        
        /* --- é ‚éƒ¨æ§åˆ¶é …æ¨£å¼ --- */
        .top-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .language-controls {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-size: 0.9em;
        }
        
        .phone-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phone-input-group label {
            font-weight: bold;
            flex-shrink: 0;
        }
        .phone-input-group input[type="tel"] {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        #languageSelector {
            padding: 5px;
            border-radius: 4px;
        }

        /* --- åˆ†é å°èˆªæ¨£å¼ --- */
        .tabs {
            display: flex;
            flex-wrap: wrap; 
            margin-bottom: 15px;
            border-bottom: 2px solid #ddd;
        }
        .tab-button {
            flex-grow: 1; 
            flex-shrink: 1;
            padding: 10px 8px; 
            cursor: pointer;
            background-color: #eee;
            border: 1px solid #ddd;
            border-bottom: none;
            text-align: center;
            font-size: 0.9em; 
            font-weight: bold;
            transition: background-color 0.3s;
            margin-right: -1px; 
            margin-bottom: -2px; 
        }
        .tab-button:last-child {
            margin-right: 0; 
        }
        .tab-button.active {
            background-color: #fff;
            border-bottom: 2px solid #d32f2f; 
            z-index: 1;
        }
        .tab-content {
            display: none; 
            min-height: 200px; 
        }
        .tab-content.active {
            display: block; 
        }
        
        /* --- å£å‘³é¸é …æ¨£å¼ --- */
        .flavor-option {
            display: flex;
            flex-direction: column; 
            padding: 10px 0; 
            border-bottom: 1px dashed #ddd;
        }
        .flavor-header {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        .spicy-icon {
            margin-left: 5px;
            font-size: 1.1em;
            color: #d32f2f; 
        }
        .order-groups-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
            gap: 10px;
            margin-top: 5px;
        }
        .order-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px;
            border: 1px solid #f0f0f0;
            border-radius: 4px;
            background-color: #fcfcfc;
        }
        .input-controls {
            display: flex;
            align-items: center;
            flex-grow: 1;
            justify-content: space-between; 
        }
        .quantity-label {
            font-size: 0.9em;
            margin-right: 5px;
            white-space: nowrap;
            flex-basis: 30%;
        }
        input[type="number"] { 
            width: 40px; 
            padding: 4px;
            text-align: right; 
            border: 1px solid #ccc;
            border-radius: 3px;
            margin-right: 5px;
        }
        .checkbox-label {
            font-size: 0.9em;
            margin-left: 8px;
            white-space: nowrap;
        }
        .subtotal-display {
            flex-shrink: 0; 
            min-width: 60px;
            text-align: right;
            font-weight: bold;
            color: #388e3c;
        }
        
        /* --- é»å–®æ˜ç´°æ¨£å¼ --- */
        #orderSummaryContainer {
            margin-top: 20px;
            padding: 10px;
            border-top: 2px solid #d32f2f;
        }
        #orderSummaryContainer h2 {
            color: #d32f2f;
            font-size: 1.2em;
            margin-top: 0;
            margin-bottom: 10px;
        }
        #orderSummaryList {
            list-style: none;
            padding: 0;
        }
        #orderSummaryList li {
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
            font-size: 0.95em;
        }
        #orderSummaryList .summary-qty {
            font-weight: bold;
            color: #333;
            margin-right: 5px;
        }
        #orderSummaryList .summary-total {
            font-weight: bold;
            color: #d32f2f;
            float: right;
        }
        
        /* --- ç¸½è¨ˆæ¨£å¼ --- */
        .total-summary {
            padding: 15px;
            background-color: #ffccbc;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            text-align: right;
        }
        .total-summary span {
            color: #d32f2f;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1 id="appHeader">å·§å–°é›é»å–®ç³»çµ±</h1>
        
        <p id="menuVersion">èœå–®ç‰ˆæœ¬: *2025.10.08*</p>
        
        <div class="top-controls">
            <div class="phone-input-group">
                <label for="phoneNumber">æ‰‹æ©Ÿ:</label>
                <input type="tel" id="phoneNumber" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼" required>
            </div>
            
            <div class="language-controls">
                <span id="languageLabel">é¸æ“‡èªè¨€ (Langue):</span>
                <select id="languageSelector">
                    <option value="zh">ç¹é«”ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                    <option value="ko">í•œêµ­ì–´</option>
                </select>
            </div>
        </div>

        <div class="tabs" id="tabButtons">
        </div>

        <div id="menuContainer">
        </div>
        
        <div id="orderSummaryContainer">
            <h2 id="summaryHeader">é»å–®æ˜ç´°</h2>
            <ul id="orderSummaryList">
                <li id="emptySummaryMessage">å°šæœªé»é¸ä»»ä½•å•†å“ã€‚</li>
            </ul>
        </div>
        

        <div class="total-summary">
            <span id="totalLabel">ç¸½è¨ˆ</span>ï¼š<span id="ntdLabel">NTD</span> <span id="grandTotal">0</span>
        </div>
        
    </div>

    <script>
        // --- 1. å¤šèªè¨€å­—ä¸²å°æ‡‰æ©Ÿåˆ¶ (æ›´æ–°æ¨™é¡Œ) ---
        let currentLang = 'zh';

        const LANGUAGES = {
            zh: {
                title: "å·§å–°é›é»å–®ç³»çµ±", nonSpicy: "ä¸è¾£", spicy: "è¾£", cut: "åˆ‡ 5 å¡Š", total: "ç¸½è¨ˆ", ntd: "NTD", orderSummary: "é»å–®æ˜ç´°", emptySummary: "å°šæœªé»é¸ä»»ä½•å•†å“ã€‚", qty: "ä»½",
                item_charcoal_chicken: "ç¢³çƒ¤é¦™é›æ’", item_fried_chicken: "ç‚¸é›æ’", item_fries: "è–¯æ¢", item_sweet_potato: "ç”œä¸è¾£", item_chicken_crispy: "é›è‚‰é…¥", item_squid_crispy: "é­·é­šé…¥", item_fishball: "èŠ±æä¸¸",
                flavor_honey_sauce: "èœœæ±", flavor_seaweed: "æµ·è‹”", flavor_bbq: "ç‡’çƒ¤", flavor_lemon: "æª¸æª¬", flavor_spicy_chili: "éº»è¾£", flavor_plum: "æ¢…å­", flavor_garlic: "è’œé¦™", flavor_shichimi: "ä¸ƒå‘³", flavor_wasabi: "å“‡æ²™ç±³", flavor_black_pepper: "é»‘èƒ¡æ¤’", flavor_pepper: "èƒ¡æ¤’", flavor_curry: "å’–å“©", flavor_seaweed_plum: "æµ·è‹”æ¢…å­",
            },
            en: {
                title: "Chicken Delight Ordering System", nonSpicy: "Non-Spicy", spicy: "Spicy", cut: "Cut 5 Pcs", total: "Grand Total", ntd: "NTD", orderSummary: "Order Summary", emptySummary: "No items ordered yet.", qty: "Pcs",
                item_charcoal_chicken: "Charcoal Chicken Fillet", item_fried_chicken: "Fried Chicken Fillet", item_fries: "Fries", item_sweet_potato: "Sweet Potato Tempura", item_chicken_crispy: "Crispy Chicken Bits", item_squid_crispy: "Crispy Squid", item_fishball: "Fish Balls",
                flavor_honey_sauce: "Honey Sauce", flavor_seaweed: "Seaweed", flavor_bbq: "BBQ", flavor_lemon: "Lemon", flavor_spicy_chili: "Spicy Chili", flavor_plum: "Plum", flavor_garlic: "Garlic", flavor_shichimi: "Shichimi", flavor_wasabi: "Wasabi", flavor_black_pepper: "Black Pepper", flavor_pepper: "Pepper", flavor_curry: "Curry", flavor_seaweed_plum: "Seaweed & Plum",
            },
            ja: {
                title: "ãƒã‚­ãƒ³ãƒ‡ãƒ©ã‚¤ãƒˆæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ", nonSpicy: "è¾›ããªã„", spicy: "è¾›ã„", cut: "5ãƒ”ãƒ¼ã‚¹ã«ã‚«ãƒƒãƒˆ", total: "åˆè¨ˆ", ntd: "NTD", orderSummary: "æ³¨æ–‡æ˜ç´°", emptySummary: "ã¾ã å•†å“ãŒæ³¨æ–‡ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚", qty: "å€‹",
                item_charcoal_chicken: "ç‚­ç«ç„¼ããƒã‚­ãƒ³", item_fried_chicken: "ãƒ•ãƒ©ã‚¤ãƒ‰ãƒã‚­ãƒ³", item_fries: "ãƒ•ãƒ©ã‚¤ãƒ‰ãƒãƒ†ãƒˆ", item_sweet_potato: "ã•ã¤ã¾æšã’", item_chicken_crispy: "é›è‚‰ã‚µã‚¯ã‚µã‚¯", item_squid_crispy: "ã‚¤ã‚«ã‚µã‚¯ã‚µã‚¯", item_fishball: "ã‚¤ã‚«å›£å­",
                flavor_honey_sauce: "èœœã®ã‚¿ãƒ¬", flavor_seaweed: "æµ·è‹”", flavor_bbq: "ç„¼ãè‚‰", flavor_lemon: "ãƒ¬ãƒ¢ãƒ³", flavor_spicy_chili: "æ¿€è¾›", flavor_plum: "æ¢…", flavor_garlic: "ãƒ‹ãƒ³ãƒ‹ã‚¯", flavor_shichimi: "ä¸ƒå‘³", flavor_wasabi: "ã‚ã•ã³", flavor_black_pepper: "é»’èƒ¡æ¤’", flavor_pepper: "èƒ¡æ¤’", flavor_curry: "ã‚«ãƒ¬ãƒ¼", flavor_seaweed_plum: "æµ·è‹”æ¢…",
            },
            ko: {
                title: "ì¹˜í‚¨ ë”œë¼ì´íŠ¸ ì£¼ë¬¸ ì‹œìŠ¤í…œ", nonSpicy: "ìˆœí•œ ë§›", spicy: "ë§¤ìš´ ë§›", cut: "5ì¡°ê° ì»¤íŒ…", total: "ì´í•©ê³„", ntd: "NTD", orderSummary: "ì£¼ë¬¸ ë‚´ì—­", emptySummary: "ì•„ì§ ì£¼ë¬¸ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤ã€‚", qty: "ê°œ",
                item_charcoal_chicken: "ìˆ¯ë¶ˆ êµ¬ì´ ì¹˜í‚¨", item_fried_chicken: "í›„ë¼ì´ë“œ ì¹˜í‚¨", item_fries: "ê°ì íŠ€ê¹€", item_sweet_potato: "ì–´ë¬µ", item_chicken_crispy: "ë°”ì‚­í•œ ë‹­ê³ ê¸°", item_squid_crispy: "ë°”ì‚­í•œ ì˜¤ì§•ì–´", item_fishball: "ì˜¤ì§•ì–´ë³¼",
                flavor_honey_sauce: "ê¿€ ì†ŒìŠ¤", flavor_seaweed: "ê¹€", flavor_bbq: "ë°”ë² í", flavor_lemon: "ë ˆëª¬", flavor_spicy_chili: "ë§¤ì½¤í•œ ê³ ì¶”", flavor_plum: "ìë‘", flavor_garlic: "ë§ˆëŠ˜", flavor_shichimi: "ì‹œì¹˜ë¯¸", flavor_wasabi: "ì™€ì‚¬ë¹„", flavor_black_pepper: "ë¸”ë™ í˜í¼", flavor_pepper: "í›„ì¶”", flavor_curry: "ì¹´ë ˆ", flavor_seaweed_plum: "ê¹€&ìë‘",
            }
        };

        // --- 2. èœå–®æ•¸æ“šçµæ§‹ ---
        const MENU_FLAVOR_DETAILS = {
            flavorSpicyLevel: {
                'flavor_spicy_chili': 1, 
                'flavor_shichimi': 2,    
            }
        };

        const MENU = [
            { id: 'charcoal_chicken', nameKey: 'item_charcoal_chicken', price: 85, hasCutOption: true, flavorKeys: ['flavor_honey_sauce', 'flavor_seaweed', 'flavor_bbq', 'flavor_lemon', 'flavor_spicy_chili', 'flavor_plum', 'flavor_garlic', 'flavor_shichimi', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_pepper'] },
            { id: 'fried_chicken', nameKey: 'item_fried_chicken', price: 80, hasCutOption: true, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
            { id: 'fries', nameKey: 'item_fries', price: 35, hasCutOption: false, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
            { id: 'sweet_potato', nameKey: 'item_sweet_potato', price: 35, hasCutOption: false, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
            { id: 'chicken_crispy', nameKey: 'item_chicken_crispy', price: 65, hasCutOption: false, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
            { id: 'squid_crispy', nameKey: 'item_squid_crispy', price: 65, hasCutOption: false, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
            { id: 'fishball', nameKey: 'item_fishball', price: 30, hasCutOption: false, flavorKeys: ['flavor_curry', 'flavor_spicy_chili', 'flavor_wasabi', 'flavor_black_pepper', 'flavor_seaweed_plum', 'flavor_seaweed', 'flavor_plum', 'flavor_garlic', 'flavor_pepper', 'flavor_shichimi'] },
        ];

        const tabButtonsContainer = document.getElementById('tabButtons');
        const menuContainer = document.getElementById('menuContainer');
        const languageSelector = document.getElementById('languageSelector');

        // --- 3. æ ¸å¿ƒå‡½å¼ ---

        function calculateTotal() {
            let grandTotal = 0;
            document.querySelectorAll('.quantity-input').forEach(input => {
                const quantity = parseInt(input.value) || 0;
                const itemPrice = parseFloat(input.closest('.order-group').dataset.price) || 0;
                const subtotal = itemPrice * quantity;
                grandTotal += subtotal;

                input.closest('.order-group').querySelector('.subtotal-display').textContent = subtotal.toLocaleString(currentLang === 'zh' ? 'zh-TW' : currentLang);
            });

            document.getElementById('grandTotal').textContent = grandTotal.toLocaleString(currentLang === 'zh' ? 'zh-TW' : currentLang);
            renderOrderSummary();
        }
        
        // --- é»å–®æ˜ç´°æ¸²æŸ“å‡½å¼ ---
        function renderOrderSummary() {
            const L = LANGUAGES[currentLang];
            const activeOrders = [];
            let totalOrders = 0;

            document.querySelectorAll('.order-group').forEach(group => {
                const input = group.querySelector('.quantity-input');
                const quantity = parseInt(input.value) || 0;
                
                if (quantity > 0) {
                    totalOrders++;
                    
                    const itemKey = group.dataset.itemId;
                    const flavorKey = group.dataset.flavorKey;
                    const isSpicy = group.dataset.spicy === 'true';
                    const subtotal = parseFloat(group.dataset.price) * quantity;
                    
                    const isCut = group.querySelector('.cut-checkbox')?.checked || false;
                    
                    const spicyLevel = MENU_FLAVOR_DETAILS.flavorSpicyLevel[flavorKey] || 0;
                    
                    const itemName = L[itemKey];
                    const flavorName = L[flavorKey];
                    
                    let options = "";
                    if (spicyLevel > 0) {
                        options += ` (${'ğŸŒ¶ï¸'.repeat(spicyLevel)})`;
                    } else {
                        options += isSpicy ? ` (${L.spicy})` : ` (${L.nonSpicy})`;
                    }
                    
                    if (isCut) {
                        options += `, ${L.cut}`;
                    }
                    
                    activeOrders.push({
                        name: itemName,
                        flavor: flavorName,
                        options: options,
                        quantity: quantity,
                        subtotal: subtotal
                    });
                }
            });

            const summaryList = document.getElementById('orderSummaryList');
            summaryList.innerHTML = '';
            if (totalOrders === 0) {
                summaryList.innerHTML = `<li id="emptySummaryMessage">${L.emptySummary}</li>`;
            } else {
                activeOrders.forEach(order => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span class="summary-qty">${order.quantity} ${L.qty}</span>
                        ${order.name} - ${order.flavor} ${order.options}
                        <span class="summary-total">${order.subtotal.toLocaleString(currentLang === 'zh' ? 'zh-TW' : currentLang)}</span>
                    `;
                    summaryList.appendChild(li);
                });
            }
        }


        // --- è¼”åŠ©å‡½å¼ï¼šç”Ÿæˆå–®ä¸€çš„é»å–®è¼¸å…¥çµ„ ---
        function generateOptionHTML(item, flavorKey, spicyStatus) {
            const L = LANGUAGES[currentLang];
            const isSpicy = spicyStatus === 'spicy';
            const labelText = isSpicy ? L.spicy : L.nonSpicy;
            
            let cutCheckbox = '';
            
            if (item.hasCutOption) {
                 cutCheckbox = `<label class="checkbox-label"><input type="checkbox" class="cut-checkbox"> ${L.cut}</label>`;
            }

            return `
                <div class="order-group" data-price="${item.price}" data-item-id="${item.nameKey}" data-flavor-key="${flavorKey}" data-spicy="${isSpicy ? 'true' : 'false'}">
                    <div class="input-controls">
                        <span class="quantity-label">${labelText}:</span>
                        <input type="number" class="quantity-input" value="0" min="0">
                        ${cutCheckbox}
                    </div>
                    <span class="subtotal-display">0</span>
                </div>
            `;
        }
        
        // --- Tab åˆ‡æ›å‡½å¼ ---
        function changeTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => { content.classList.remove('active'); });
            document.querySelectorAll('.tab-button').forEach(button => { button.classList.remove('active'); });

            document.getElementById(tabId)?.classList.add('active');
            document.querySelector(`.tab-button[data-tab-id="${tabId}"]`)?.classList.add('active');
        }
        
        // --- è¼¸å…¥è™•ç†å‡½å¼ ---
        function handleInputFocus(event) { event.target.value = ''; }
        function handleInputBlur(event) {
            if (event.target.value === '') { event.target.value = 0; }
            calculateTotal(); 
        }
        function handleCheckboxChange(event) { calculateTotal(); }


        // --- åˆå§‹åŒ–é é¢ï¼šå‹•æ…‹ç”Ÿæˆèœå–® Tab æŒ‰éˆ•å’Œå…§å®¹ ---
        function initializeMenu() {
            let isFirstItem = true;
            
            menuContainer.innerHTML = '';
            tabButtonsContainer.innerHTML = '';
            
            MENU.forEach(item => {
                const L = LANGUAGES[currentLang];
                
                // 1. ç”Ÿæˆ Tab æŒ‰éˆ• (ä½¿ç”¨ç¿»è­¯å¾Œçš„å“é …åç¨±)
                const tabButton = document.createElement('div');
                tabButton.className = isFirstItem ? 'tab-button active' : 'tab-button';
                tabButton.textContent = L[item.nameKey]; 
                tabButton.dataset.tabId = item.id;
                tabButton.onclick = () => changeTab(item.id);
                tabButtonsContainer.appendChild(tabButton);

                // 2. ç”Ÿæˆ Tab å…§å®¹å€
                const tabContent = document.createElement('div');
                tabContent.id = item.id;
                tabContent.className = isFirstItem ? 'tab-content active' : 'tab-content';
                
                // 3. å»ºç«‹å£å‘³æ¸…å–®
                item.flavorKeys.forEach(flavorKey => {
                    const option = document.createElement('div');
                    option.className = 'flavor-option';
                    
                    const spicyLevel = MENU_FLAVOR_DETAILS.flavorSpicyLevel[flavorKey] || 0;
                    
                    const spicyIconHtml = spicyLevel > 0 ? `<span class="spicy-icon">${'ğŸŒ¶ï¸'.repeat(spicyLevel)}</span>` : '';
                    
                    let innerHTML = `<div class="flavor-header">${L[flavorKey]}${spicyIconHtml}</div>`; 
                    let contentHTML = '<div class="order-groups-container">';

                    if (spicyLevel > 0) {
                        // æœ¬èº«å°±è¾£çš„å£å‘³ï¼šåªé¡¯ç¤ºã€Œè¾£ã€çš„è¼¸å…¥æ¬„ä½
                        contentHTML += generateOptionHTML(item, flavorKey, 'spicy');
                    } else {
                        // å…¶ä»–å£å‘³ï¼šé¡¯ç¤ºã€Œä¸è¾£ã€å’Œã€Œè¾£ã€å…©çµ„è¼¸å…¥æ¬„ä½
                        contentHTML += generateOptionHTML(item, flavorKey, 'nonSpicy');
                        contentHTML += generateOptionHTML(item, flavorKey, 'spicy');
                    }
                    
                    contentHTML += '</div>';
                    
                    option.innerHTML = innerHTML + contentHTML;
                    tabContent.appendChild(option);
                });

                menuContainer.appendChild(tabContent);
                
                if (isFirstItem) {
                    isFirstItem = false;
                }
            });
            
            // 4. ç¶å®šäº‹ä»¶çµ¦æ‰€æœ‰å‹•æ…‹ç”Ÿæˆçš„è¼¸å…¥æ¡†å’Œå‹¾é¸æ¡†
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('input', calculateTotal);
                input.addEventListener('focus', handleInputFocus);
                input.addEventListener('blur', handleInputBlur);
            });
            document.querySelectorAll('.cut-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', handleCheckboxChange);
            });
        }

        // --- èªè¨€åˆ‡æ›é‚è¼¯ ---
        function setLanguage(lang) {
            currentLang = lang;
            const L = LANGUAGES[lang];
            
            // 1. æ›´æ–°éœæ…‹æ–‡å­— (æ¨™é¡Œ)
            document.getElementById('appTitle').textContent = L.title;
            document.getElementById('appHeader').textContent = L.title;
            document.getElementById('totalLabel').textContent = L.total;
            document.getElementById('ntdLabel').textContent = L.ntd;
            document.getElementById('summaryHeader').textContent = L.orderSummary;

            // 2. é‡æ–°åˆå§‹åŒ–èœå–® (æ›´æ–°å“é …å’Œå£å‘³ç¿»è­¯)
            initializeMenu();
            
            // 3. é‡æ–°è¨ˆç®—ç¸½é¡/æ˜ç´°ä»¥æ›´æ–°æ ¼å¼å’Œå…§å®¹
            calculateTotal(); 

            // 4. ç¢ºä¿èªè¨€é¸æ“‡å™¨é¡¯ç¤ºæ­£ç¢ºå€¼
            languageSelector.value = lang;
        }

        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            languageSelector.addEventListener('change', (e) => setLanguage(e.target.value));
            
            // é¦–æ¬¡è¼‰å…¥é é¢ï¼Œè¨­ç½®èªè¨€ä¸¦åˆå§‹åŒ–èœå–®
            setLanguage(currentLang);
        });
    </script>
</body>
</html>
